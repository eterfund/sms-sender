# Простой PHP-класс для отправки email через API Unisender

Полный пример использования - в файле test.php.

Конструктор `SmsSender` принимает два аргумента:
- `unisender_key` - ключ API Unisender;
- `$logger` - (опционально) логгер, реализующий [PSR-3 LoggerInterface](https://github.com/php-fig/log/blob/master/Psr/Log/LoggerInterface.php)

## Отправка сообщения

Метод отправки сообщения: `sendSms($params)`
`$params` - ассоциативный массив с ключами:
- `phone` - номер, куда слать (может быть строкой, лишние символы удаляются);
- `sender` - имя отправителя;
- `text` - текст отправляемого сообщения.
Возвращает SMS ID отправленного сообщения.
В случае ошибки выбрасывает исключение.

## Проверка статуса

Используйте метод `checkSms($params)`. Он принимает `$params` - ассоциативный массив с ключом:
- `sms_id` - SMS ID, возвращённый из `sendSms`
Возвращает константу статуса, соответствующую [статусу SMS UniSender](https://www.unisender.com/ru/support/integration/api/checkSms). *Курсивом*
выделены неокончательные статусы - они могут изменяться. Список констант:
- *`SmsStatus::NOT_SENT` (101) - Сообщение пока не отправлено, ждёт отправки. Статус будет изменён после отправки.*
- *`SmsStatus::OK_SENT` (102) - Сообщение отправлено, но статус доставки пока неизвестен. Статус временный и может измениться.*
- `SmsStatus::OK_DELIVERED` (201) -	Сообщение доставлено. Статус окончательный.
- `SmsStatus::ERR_SRC_INVALID` (301)  - Доставка невозможна, отправитель задан неправильно. Статус окончательный.
- `SmsStatus::ERR_DEST_INVALID` (302) - Доставка невозможна, указан неправильный номер. Статус окончательный.
- `SmsStatus::ERR_SKIP_LETTER` (303) - Доставка невозможна, т.к. во время отправки был изменён статус телефона, либо телефон был удалён из списка, либо письмо было удалено. Статус окончательный.
- `SmsStatus::ERR_NOT_ALLOWED` (304) - Доставка невозможна, этот оператор связи не обслуживается. Статус окончательный.
- `SmsStatus::ERR_DELIVERY_FAILED` (305) - Доставка не удалась - обычно по причине указания формально правильного, но - несуществующего номера или из-за выключенного телефона. Статус окончательный.
- `SmsStatus::ERR_LOST` (306) - Сообщение было утеряно, отправитель должен переотправить сообщение самостоятельно, т.к. оригинал не сохранился. Статус окончательный.
- `SmsStatus::ERR_INTERNAL` (307) - Внутренний сбой. Необходима переотправка сообщения. Статус окончательный. 
